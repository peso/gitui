# Code Acumen - Analysis Log
This text is a log of what I have found out during analysis of the code.
I start out from knowing nothing about it

2025-04-03 06:48

The program shows a log of a git repository.
It is written in Rust and uses ratatui.
Goal:
    Determine if I can use it as a library in gitui to display the log with
    a graph. gitui does not have that today.

Goal:
    I want to find the API that allows me to render the log. 
    Let me start by finding the render code.
Info:
    wc-tree.py reports 4k LOC in 18 files of Rust
Q:
    Where is the graph rendered?

7:12

main.rs
    :41..237 # define CLI parameters
    :237..382 # configure from provided CLI arguments
    :382..397 # call run() to build output
    :399..405 fn run(..) parameters
        :407 graph = GitGraph::new
            graph.rs:30 fn GitGraph.new
        :430 print_unicode(&graph) # will it generate print-data for every commit??
        :434 print_unpaged(g_lines, t_lines)
        :535 fn print_unpaged(graph_lines, text_lines)
            # iterate graph_lines

07:27

A:
    It is generated by graph.rs:GitGraph
    it is rendered in gitgraph/print/unicode.rs:print_unicode

Q:
    How do I specify which commit range to show?

pause til 16:23

More info
print/unicode.rs:39 fn print_unicode
    :67 for info in graph.commits.iter()
        compute text part
    :144 for info in graph.commits.iter()
        compute branch graph part
    :197 lines = print_graph(.. text_lines)
        :498 fn print_graph
            returns two vec (g_lines, t_lines)

A:
    That would be graph.commits, a Vec<CommitInfo>
    GitGraph.new fills it
    :99
    using info.branch_trace as a filter?

struct CommitInfo.branch_trace is Option<usize>

unicode.rs:544 fn format # format a commit


Thought:
    Maybe I should look at main to see how it pages?
    It looks like it calls print_unicode to print the entire graph to memory
    and then show it gradually.


graph.rs:30 GitGraph.new
    has parameter max_counts that will limit number of commits to generate

    will repository: git2.Repository
    or settings: settings.Settings
    etermine the first commit?

    reposity.revwalk generates an iterator?

Unfortunately
    graph.rs:29 fn GitGraph.new
will select which commits are extracted from theh repository.
It does not have a starting point, so it always starts at HEAD.
s
Q:
    How does gitui manage which revisions to show?

17:27 -- stop, must take evening walk

19:46 -- look at gitui

